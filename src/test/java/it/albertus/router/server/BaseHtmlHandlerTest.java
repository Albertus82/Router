package it.albertus.router.server;

import org.junit.Assert;
import org.junit.Test;

import it.albertus.router.server.html.BaseHtmlHandler;

public class BaseHtmlHandlerTest {

	private static final String str = "Nel mezzo del cammin di nostra vita\r\nmi ritrovai per una selva oscura,\r\nch\u00E9 la diritta via era smarrita.\r\n\r\nAhi quanto a dir qual era \u00E8 cosa dura\r\nesta selva selvaggia e aspra e forte\r\nche nel pensier rinova la paura!\r\n\r\nTant'\u00E8 amara che poco \u00E8 pi\u00F9 morte;\r\nma per trattar del ben ch'i' vi trovai,\r\ndir\u00F2 de l'altre cose ch'i' v'ho scorte.\r\n\r\nIo non so ben ridir com' i' v'intrai,\r\ntant' era pien di sonno a quel punto\r\nche la verace via abbandonai.\r\n\r\nMa poi ch'i' fui al pi\u00E8 d'un colle giunto,\r\nl\u00E0 dove terminava quella valle\r\nche m'avea di paura il cor compunto,\r\n\r\nguardai in alto e vidi le sue spalle\r\nvestite gi\u00E0 de' raggi del pianeta\r\nche mena dritto altrui per ogne calle.\r\n\r\nAllor fu la paura un poco queta,\r\nche nel lago del cor m'era durata\r\nla notte ch'i' passai con tanta pieta.\r\n\r\nE come quei che con lena affannata,\r\nuscito fuor del pelago a la riva,\r\nsi volge a l'acqua perigliosa e guata,\r\n\r\ncos\u00EC l'animo mio, ch'ancor fuggiva,\r\nsi volse a retro a rimirar lo passo\r\nche non lasci\u00F2 gi\u00E0 mai persona viva.\r\n\r\nPoi ch'\u00E8i posato un poco il corpo lasso,\r\nripresi via per la piaggia diserta,\r\ns\u00EC che 'l pi\u00E8 fermo sempre era 'l pi\u00F9 basso.\r\n\r\nEd ecco, quasi al cominciar de l'erta,\r\nuna lonza leggiera e presta molto,\r\nche di pel macolato era coverta;\r\n\r\ne non mi si partia dinanzi al volto,\r\nanzi 'mpediva tanto il mio cammino,\r\nch'i' fui per ritornar pi\u00F9 volte v\u00F2lto.\r\n\r\nTemp' era dal principio del mattino,\r\ne 'l sol montava 'n s\u00F9 con quelle stelle\r\nch'eran con lui quando l'amor divino\r\n\r\nmosse di prima quelle cose belle;\r\ns\u00EC ch'a bene sperar m'era cagione\r\ndi quella fiera a la gaetta pelle\r\n\r\nl'ora del tempo e la dolce stagione;\r\nma non s\u00EC che paura non mi desse\r\nla vista che m'apparve d'un leone.\r\n\r\nQuesti parea che contra me venisse\r\ncon la test'alta e con rabbiosa fame,\r\ns\u00EC che parea che l'aere ne tremesse.\r\n\r\nEd una lupa, che di tutte brame\r\nsembiava carca ne la sua magrezza,\r\ne molte genti f\u00E9 gi\u00E0 viver grame,\r\n\r\nquesta mi porse tanto di gravezza\r\ncon la paura ch'uscia di sua vista,\r\nch'io perdei la speranza de l'altezza.\r\n\r\nE qual \u00E8 quei che volontieri acquista,\r\ne giugne 'l tempo che perder lo face,\r\nche 'n tutti suoi pensier piange e s'attrista;\r\n\r\ntal mi fece la bestia sanza pace,\r\nche, venendomi 'ncontro, a poco a poco\r\nmi ripigneva l\u00E0 dove 'l sol tace.\r\n\r\nMentre ch'i' rovinava in basso loco,\r\ndinanzi a li occhi mi si fu offerto\r\nchi per lungo silenzio parea fioco.\r\n\r\nQuando vidi costui nel gran diserto,\r\n\u00ABMiserere di me\u00BB, gridai a lui,\r\n\u00ABqual che tu sii, od ombra od omo certo!\u00BB.\r\n\r\nRispuosemi: \u00ABNon omo, omo gi\u00E0 fui,\r\ne li parenti miei furon lombardi,\r\nmantoani per patr\u00EFa ambedui.\r\n\r\nNacqui sub Iulio, ancor che fosse tardi,\r\ne vissi a Roma sotto 'l buono Augusto\r\nnel tempo de li d\u00E8i falsi e bugiardi.\r\n\r\nPoeta fui, e cantai di quel giusto\r\nfigliuol d'Anchise che venne di Troia,\r\npoi che 'l superbo Il\u00EF\u00F3n fu combusto.\r\n\r\nMa tu perch\u00E9 ritorni a tanta noia?\r\nperch\u00E9 non sali il dilettoso monte\r\nch'\u00E8 principio e cagion di tutta gioia?\u00BB.\r\n\r\n\u00ABOr se' tu quel Virgilio e quella fonte\r\nche spandi di parlar s\u00EC largo fiume?\u00BB,\r\nrispuos' io lui con vergognosa fronte.\r\n\r\n\u00ABO de li altri poeti onore e lume,\r\nvagliami 'l lungo studio e 'l grande amore\r\nche m'ha fatto cercar lo tuo volume.\r\n\r\nTu se' lo mio maestro e 'l mio autore,\r\ntu se' solo colui da cu' io tolsi\r\nlo bello stilo che m'ha fatto onore.\r\n\r\nVedi la bestia per cu' io mi volsi;\r\naiutami da lei, famoso saggio,\r\nch'ella mi fa tremar le vene e i polsi\u00BB.\r\n\r\n\u00ABA te convien tenere altro v\u00EFaggio\u00BB,\r\nrispuose, poi che lagrimar mi vide,\r\n\u00ABse vuo' campar d'esto loco selvaggio;\r\n\r\nch\u00E9 questa bestia, per la qual tu gride,\r\nnon lascia altrui passar per la sua via,\r\nma tanto lo 'mpedisce che l'uccide;\r\n\r\ne ha natura s\u00EC malvagia e ria,\r\nche mai non empie la bramosa voglia,\r\ne dopo 'l pasto ha pi\u00F9 fame che pria.\r\n\r\nMolti son li animali a cui s'ammoglia,\r\ne pi\u00F9 saranno ancora, infin che 'l veltro\r\nverr\u00E0, che la far\u00E0 morir con doglia.\r\n\r\nQuesti non ciber\u00E0 terra n\u00E9 peltro,\r\nma sap\u00EFenza, amore e virtute,\r\ne sua nazion sar\u00E0 tra feltro e feltro.\r\n\r\nDi quella umile Italia fia salute\r\nper cui mor\u00EC la vergine Cammilla,\r\nEurialo e Turno e Niso di ferute.\r\n\r\nQuesti la caccer\u00E0 per ogne villa,\r\nfin che l'avr\u00E0 rimessa ne lo 'nferno,\r\nl\u00E0 onde 'nvidia prima dipartilla.\r\n\r\nOnd' io per lo tuo me' penso e discerno\r\nche tu mi segui, e io sar\u00F2 tua guida,\r\ne trarrotti di qui per loco etterno;\r\n\r\nove udirai le disperate strida,\r\nvedrai li antichi spiriti dolenti,\r\nch'a la seconda morte ciascun grida;\r\n\r\ne vederai color che son contenti\r\nnel foco, perch\u00E9 speran di venire\r\nquando che sia a le beate genti.\r\n\r\nA le quai poi se tu vorrai salire,\r\nanima fia a ci\u00F2 pi\u00F9 di me degna:\r\ncon lei ti lascer\u00F2 nel mio partire;\r\n\r\nch\u00E9 quello imperador che l\u00E0 s\u00F9 regna,\r\nperch' i' fu' ribellante a la sua legge,\r\nnon vuol che 'n sua citt\u00E0 per me si vegna.\r\n\r\nIn tutte parti impera e quivi regge;\r\nquivi \u00E8 la sua citt\u00E0 e l'alto seggio:\r\noh felice colui cu' ivi elegge!\u00BB.\r\n\r\nE io a lui: \u00ABPoeta, io ti richeggio\r\nper quello Dio che tu non conoscesti,\r\na ci\u00F2 ch'io fugga questo male e peggio,\r\n\r\nche tu mi meni l\u00E0 dov' or dicesti,\r\ns\u00EC ch'io veggia la porta di san Pietro\r\ne color cui tu fai cotanto mesti\u00BB.\r\n\r\nAllor si mosse, e io li tenni dietro.";

	@Test
	public void escapeHtmlTest() {
		final String escaped = BaseHtmlHandler.escapeHtml(str);
		System.out.println(escaped);
		Assert.assertEquals(str, BaseHtmlHandler.unescapeHtml(escaped));
	}

}
